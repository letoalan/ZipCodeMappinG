<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Rechercher limites de communes par code postal</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<header>
    <h1>Limites des communes par code postal</h1>
    <div id="controls">
        <label for="postcode">Code postal :</label>
        <input id="postcode" type="text" placeholder="ex: 75001 ou 75001,75002" />
        <button id="searchBtn">Rechercher</button>
        <button id="downloadBtn" disabled>Télécharger résultats</button>
    </div>
</header>
<main>
    <div id="map"></div>
    <aside id="side">
        <div class="search-mode">
            <label><input type="radio" name="searchMode" value="postal" checked> Par code postal</label>
            <label><input type="radio" name="searchMode" value="direct"> Recherche directe</label>
        </div>

        <div id="directMode" style="display:none">
            <label for="propSelect">Propriété utilisée pour le code postal :</label>
            <select id="propSelect"></select>
            <div class="prop-sample" id="propSample"></div>
        </div>

        <div id="status"></div>

        <div id="groupControls">
            <button id="addSelectedBtn" disabled>Ajouter sélectionnées au groupe</button>
            <button id="addAllBtn" disabled>Ajouter toutes au groupe</button>
            <button id="clearGroupBtn" disabled>Vider groupe</button>
            <button id="selectAllBtn" disabled>Sélectionner tout</button>
            <button id="selectNoneBtn" disabled>Désélectionner tout</button>
        </div>

        <div id="selectionInfo" style="font-size:12px;color:#6b7280;margin-top:8px;"></div>

        <textarea id="coordsOutput" readonly placeholder="Les coordonnées des communes sélectionnées ou du groupe s'afficheront ici (GeoJSON). Vous pouvez copier-coller."></textarea>

        <div id="coordsInfo" style="font-size:12px;color:#6b7280;margin-top:4px;">
            <label><input type="radio" name="coordsMode" value="selected" checked> Afficher sélectionnées</label>
            <label><input type="radio" name="coordsMode" value="group"> Afficher groupe</label>
        </div>

        <div id="stats"></div>

        <div id="results">
            <strong>Résultats :</strong>
            <div id="list"></div>
        </div>
    </aside>
</main>
<footer>
    AD pour la mission académique à l'éducation au développement durable de l'académie de Limoges - 2025
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<script type="module" src="script/app.js"></script>


</body>
</html>
